"use strict";var theaterRowElements=document.querySelectorAll("#mntheater-table tbody tr"),tableRowElements=document.querySelectorAll("#mntheater-table tr"),tableBodyElement=document.querySelector("#mntheater-table tbody"),displayCheckboxElements=document.querySelectorAll("#mntheater-display .mmntheater-display-item input"),COL=Object.freeze({NAME:1,CITY:2,ADDRESS:3,PHONE:4,ROOMS:5,ID:6});function showTableColumn(e){tableRowElements.forEach(function(t){t.children[e].style.display="table-cell"})}function hideTableColumn(e){tableRowElements.forEach(function(t){t.children[e].style.display="none"})}function refreshDisplay(){displayCheckboxElements.forEach(function(e,t){!1===e.checked&&hideTableColumn(t+1)})}function openModal(){$("#myModal").css("display","block")}function closeModal(){$("#myModal").css("display","none")}function editModal(){$(".modal-content").hasClass("editing")?($(".modal-content").removeClass("editing"),$("#edit").text("Edit"),$(".modal-content").find(".edit").each(function(){if(jQuery(this).is("#mapid")||jQuery(this).hasClass("desField")){var e=$(this).find("TEXTAREA").val();$(this).text(e),$(this).find("TEXTAREA").remove()}else{var t=$(this).find("INPUT").val();$(this).text(t),$(this).find("INPUT").remove()}})):($(".modal-content").addClass("editing"),$("#edit").text("Save"),$(".modal-content").find(".edit").each(function(){if(jQuery(this).is("#mapid")){var e=jQuery(this).text();jQuery(this).text(""),jQuery(this).append('<textarea class="form-control" rows="3" id="mapEmbedID" name="mapEmbedID" onchange="updateMap();" required>'.concat(e,"</textarea>"))}else if(jQuery(this).hasClass("desField")){var t=jQuery(this).text();jQuery(this).text(""),jQuery(this).append('<textarea class="form-control" rows="6">'.concat(t,"</textarea>"))}else{var n=jQuery(this).text();jQuery(this).text(""),jQuery(this).append('<input class="textfield" type="text" value="'.concat(n,'" />'))}}))}function updateMap(){var e;e="".concat(document.getElementById("mapEmbedID").value),document.getElementById("Map").src=e}function submitModal(){var e,t,n,a,l,o,d;(e=document.createElement("form")).action="/admin/manageTheater/update/".concat($(".idField").text()),e.method="post",(t=document.createElement("input")).type="hidden",t.name="id",t.value=$(".idField").text(),(n=document.createElement("input")).type="hidden",n.name="namefield",n.value=$(".nameField").text(),(a=document.createElement("input")).type="hidden",a.name="city",a.value=$(".cityField").text(),(l=document.createElement("input")).type="hidden",l.name="address",l.value=$(".addressField").text(),(o=document.createElement("input")).type="hidden",o.name="phone",o.value=$(".phoneField").text(),(d=document.createElement("input")).type="hidden",d.name="description",d.value=$(".desField").text(),e.appendChild(t),e.appendChild(n),e.appendChild(a),e.appendChild(l),e.appendChild(o),e.appendChild(d),console.log(t.value),console.log(n.value),console.log(a.value),console.log(l.value),console.log(o.value),console.log(d.value),document.getElementById("hidden_form_container").appendChild(e),e.submit()}function eventDisplayCheckboxes(){displayCheckboxElements.forEach(function(e,t){e.addEventListener("click",function(){!0===e.checked?showTableColumn(t+1):hideTableColumn(t+1)})})}function eventRowTheaters(){theaterRowElements.forEach(function(e){e.addEventListener("click",function(){var t=e.children[COL.ID].innerHTML;fetch("/api/theaters/".concat(t)).then(function(e){e.json().then(function(e){$("h2").html(e.name),$(".idField").html(t),$(".nameField").html(e.name),$(".cityField").html(e.city),$(".addressField").html(e.address),$(".phoneField").html(e.phone),$(".roomField").html(e.rooms[0]);for(var n=1;n<e.rooms.length;n+=1)$(".roomField").append(", ".concat(e.rooms[n]));$(".desField").html(e.description),$("#mapid").html("https://www.google.com/maps/embed?pb=".concat(e.mapEmbedID)),$("#Map").attr("src","https://www.google.com/maps/embed?pb=".concat(e.mapEmbedID)),openModal()})})})})}function handleEvents(){eventDisplayCheckboxes(),eventRowTheaters()}function main(){refreshDisplay(),handleEvents()}main();