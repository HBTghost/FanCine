"use strict";var moviesData,theatersData,showtimesData,movieItems,theaterItems,colorWhite="#fff",colorLightgray="#f1f1f1",colorDarkgray="#a0a3a7",colorBlack="#000",colorOrange="#f26b38",parser=new DOMParser,movieTabBtn=document.getElementById("showtimes-controller-movie"),theaterTabBtn=document.getElementById("showtimes-controller-theater"),mainContainer=document.getElementById("showtimes-main"),moviesCol=document.getElementById("showtimes-col-movie"),theatersCol=document.getElementById("showtimes-col-theater"),showtimesCol=document.getElementById("showtimes-col-showtime"),moviesList=document.querySelector("#showtimes-col-movie .showtimes-row-list"),theatersList=document.querySelector("#showtimes-col-theater .showtimes-row-list"),showtimesList=document.querySelector("#showtimes-col-showtime .showtimes-row-list"),moviesListNoti=moviesList.firstElementChild,theatersListNoti=theatersList.firstElementChild,showtimesListNotiTheater=showtimesList.firstElementChild,showtimesListNotiMovie=showtimesList.lastElementChild,curMovieItemIndex=0,curMovieID="",curTheaterItemIndex=0,curTheaterID="";function addClickEventToTheaterItems(e){theaterItems=document.getElementsByClassName("showtimes-row-data-theater");for(var t=function(t){theaterItems[t].addEventListener("click",function(){e(t)})},o=0;o<theaterItems.length;++o)t(o)}function addClickEventToMovieItems(e){movieItems=document.getElementsByClassName("showtimes-row-data-movie");for(var t=function(t){movieItems[t].addEventListener("click",function(){e(t)})},o=0;o<movieItems.length;++o)t(o)}function loadSampleShowtimes(e){fetch("/showtimes/sampleData").then(function(t){t.text().then(function(t){showtimesData=parser.parseFromString(t,"text/html"),showtimesList.innerHTML=e%2==0?showtimesData.getElementById("showtimes-showtimes-1").innerHTML:showtimesData.getElementById("showtimes-showtimes-2").innerHTML})})}function clickMovieItemAtTheaterTab(e){movieItems[curMovieItemIndex].style.backgroundColor=colorWhite,movieItems[e].style.backgroundColor=colorLightgray,curMovieItemIndex=e,curMovieID=movieItems[e].firstElementChild.innerHTML,loadSampleShowtimes(e)}function loadMoviesByTheaterID(e){fetch("/showtimes/allMovies/".concat(e)).then(function(e){e.text().then(function(e){moviesData=parser.parseFromString(e,"text/html"),moviesList.innerHTML=moviesData.getElementById("showtimes-movies").innerHTML,showtimesList.innerHTML="",showtimesList.appendChild(showtimesListNotiMovie),addClickEventToMovieItems(clickMovieItemAtTheaterTab)})})}function clickTheaterItemAtTheaterTab(e){theaterItems[curTheaterItemIndex].style.backgroundColor=colorWhite,theaterItems[e].style.backgroundColor=colorLightgray,curTheaterItemIndex=e,loadMoviesByTheaterID(curTheaterID=theaterItems[e].firstElementChild.innerHTML)}function loadAllTheaters(){fetch("/showtimes/allTheaters").then(function(e){e.text().then(function(e){theatersData=parser.parseFromString(e,"text/html"),mainContainer.innerHTML="",mainContainer.appendChild(theatersCol),mainContainer.appendChild(moviesCol),mainContainer.appendChild(showtimesCol),theatersList.innerHTML=theatersData.getElementById("showtimes-theaters").innerHTML,moviesList.innerHTML="",moviesList.appendChild(moviesListNoti),showtimesList.innerHTML="",showtimesList.appendChild(showtimesListNotiMovie),addClickEventToTheaterItems(clickTheaterItemAtTheaterTab)})})}function clickTheaterItemAtMovieTab(e){theaterItems[curTheaterItemIndex].style.backgroundColor=colorWhite,theaterItems[e].style.backgroundColor=colorLightgray,curTheaterItemIndex=e,curTheaterID=theaterItems[e].firstElementChild.innerHTML,loadSampleShowtimes(e)}function loadTheatersByMovieID(e){fetch("/showtimes/allTheaters/".concat(e)).then(function(e){e.text().then(function(e){theatersData=parser.parseFromString(e,"text/html"),theatersList.innerHTML=theatersData.getElementById("showtimes-theaters").innerHTML,showtimesList.innerHTML="",showtimesList.appendChild(showtimesListNotiTheater),addClickEventToTheaterItems(clickTheaterItemAtMovieTab)})})}function clickMovieItemAtMovieTab(e){movieItems[curMovieItemIndex].style.backgroundColor=colorWhite,movieItems[e].style.backgroundColor=colorLightgray,curMovieItemIndex=e,loadTheatersByMovieID(curMovieID=movieItems[e].firstElementChild.innerHTML)}function loadAllMovies(){fetch("/showtimes/allMovies").then(function(e){e.text().then(function(e){moviesData=parser.parseFromString(e,"text/html"),mainContainer.innerHTML="",mainContainer.appendChild(moviesCol),mainContainer.appendChild(theatersCol),mainContainer.appendChild(showtimesCol),moviesList.innerHTML=moviesData.getElementById("showtimes-movies").innerHTML,theatersList.innerHTML="",theatersList.appendChild(theatersListNoti),showtimesList.innerHTML="",showtimesList.appendChild(showtimesListNotiTheater),addClickEventToMovieItems(clickMovieItemAtMovieTab)})})}function main(){loadAllMovies()}theaterTabBtn.addEventListener("click",function(){movieTabBtn.style.borderBottomColor="transparent",movieTabBtn.style.color=colorDarkgray,theaterTabBtn.style.borderBottomColor=colorOrange,theaterTabBtn.style.color=colorBlack,loadAllTheaters()}),movieTabBtn.addEventListener("click",function(){theaterTabBtn.style.borderBottomColor="transparent",theaterTabBtn.style.color=colorDarkgray,movieTabBtn.style.borderBottomColor=colorOrange,movieTabBtn.style.color=colorBlack,loadAllMovies()}),main();