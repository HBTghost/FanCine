"use strict";var reviewRowElements=document.querySelectorAll("#mnmovie-table tbody tr"),tableRowElements=document.querySelectorAll("#mnmovie-table tr"),tableBodyElement=document.querySelector("#mnmovie-table tbody"),displayCheckboxElements=document.querySelectorAll("#mnmovie-display .mmnmovie-display-item input"),COL=Object.freeze({ORDER:0,ONAME:1,VNAME:2,TITLE:3,AUTHOR:4,ID:5});function showTableColumn(e){tableRowElements.forEach(function(n){n.children[e].style.display="table-cell"})}function hideTableColumn(e){tableRowElements.forEach(function(n){n.children[e].style.display="none"})}function refreshDisplay(){displayCheckboxElements.forEach(function(e,n){!1===e.checked&&hideTableColumn(n+1)})}function eventDisplayCheckboxes(){displayCheckboxElements.forEach(function(e,n){e.addEventListener("click",function(){!0===e.checked?showTableColumn(n+1):hideTableColumn(n+1)})})}function eventRowReviews(){reviewRowElements.forEach(function(e){e.addEventListener("click",function(){Swal.fire({icon:"info",title:"Cảnh báo",html:"Mọi thay đổi của bạn chỉ có thể khôi phục lại bằng tay với cơ sở dữ liệu!",confirmButtonText:"Xóa",showCancelButton:!0,cancelButtonText:"Trở lại"}).then(function(n){n.isConfirmed&&removeAReview(e)})})})}function handleEvents(){eventDisplayCheckboxes()}function removeAReview(e){Swal.fire({title:"Cảnh báo",icon:"warning",html:"Ba&#803;n co&#769; ch&#259;&#769;c xo&#769;a ba&#768;i vi&ecirc;&#769;t <b>".concat(e.children[COL.TITLE].innerHTML,"</b> không?"),confirmButtonColor:"#E74C3C",confirmButtonText:"Chắc chắn",showCancelButton:!0,cancelButtonColor:"#99A3A4",cancelButtonText:"Không"}).then(function(n){n.isConfirmed&&(console.log(e),removeReviewFromDatabase(e))})}function main(){refreshDisplay(),handleEvents(),eventRowReviews()}function refreshTable(){reviewRowElements=document.querySelectorAll("#mnuser-table tbody tr"),tableRowElements=document.querySelectorAll("#mnuser-table tr"),eventRowReviews()}function removeReviewFromDatabase(e){var n=e.children[COL.ID].innerHTML;try{fetch("/api/reviews/".concat(n),{method:"DELETE"}).then(function(n){n.json().then(function(n){n.message?Swal.fire({icon:"error",title:"Oops...",html:n.message}):(e.remove(),Swal.fire({icon:"success",title:"Thành công",html:"Xóa review thành công"}),refreshTable())})})}catch(e){return!1}}main();